<div id="container">
    
    <div id="left">
        <div id="left_content">
            <label id="filename" class="action_btn" for="upload-ledger">{{filename ? filename : 'Choisir un fichier .ledger'}} </label>
            <input type="file" id="upload-ledger" (change)="uploadLedgerOnChange($event.target.files)" />
            
            <label id="filename2" class="action_btn" for="upload-ofx">{{filename2 ? filename2 : 'Choisir un fichier .ofx'}} </label>
            <input type="file" id="upload-ofx" #ofx (change)="uploadOfxOnChange($event.target.files)" />

            <label class="action_btn" (click)="onSaveClicked()">Sauvegarder</label>

            <ul>
                <account-tree 
                    [account]="rootAccount"
                     [selectedAccounts]="selectedAccounts" 
                     (accountSelected)="onAccountClicked($event)"></account-tree>
            </ul>
        </div>
    </div>
    
    <div id="right">
        <div id="right_content">
            <div *ngIf="selectedAccounts && selectedAccounts.length > 0">
                <h2>
                    {{ selectedAccounts[0].name }}
                    <template [ngIf]="selectedAccounts.length > 1">
                        et {{ selectedAccounts.length - 1 }} autres     
                    </template>
                </h2>
            </div>

            <br/>
            Entre le <input type="date" value="{{startDate.format('YYYY-MM-DD')}}" (change)="startDateChanged($event)"/>
            et le
            <input type="date" value="{{endDate.format('YYYY-MM-DD')}}" (change)="endDateChanged($event)"/>
            Statut
            <select (change)="onStatusChanged($event)">
                    <option value="">Tous</option>
                    <option value="*">*</option>
                    <option value="!">!</option>
            </select>
            <br/>
            <span>{{transactions.length}} transactions affich√©es sur {{ nbTransactionsInSelectedAccounts() }} </span>
            <br/>

            <div [hidden]="!chart" >
                <div id="chartContainer" class="sixteen-nine">
                    <canvas id="chart" class="content"></canvas>
                </div>

                <span>Niveau :</span>
                <select #d (change)="onDepthChanged(d.options[d.selectedIndex].value)">
                    <option *ngFor='let depth of maxDepth | numberToArray' [value]="depth">{{depth}}</option>
                </select>
                <span>Voir :</span>
                <select #p (change)="onParamChanged(p.options[p.selectedIndex].value)">
                    <option *ngFor='let param of params | keys' [value]="param.key">{{param.value}}</option>
                </select>
                <span>Type de transaction :</span>
                <select #t (change)="onTypeChanged(t.options[t.selectedIndex].value)">
                    <option *ngFor='let type of types | keys' [value]="type.key" [selected]="type.key == currentType">{{type.value}}</option>
                </select>
            </div>

            <ul class="pagination">
                <li *ngFor='let pageIndex of nbPage | numberToArray' [class.currentPage] = "pageIndex == currentPage">
                    <a (click)="onPageChanged(pageIndex)">{{pageIndex}}</a>
                </li>
            </ul>

            <table id="transactions">
                <tr transaction [transaction]="transactionToAdd" class="row" id="newTransaction"></tr>

                <template ngFor let-tr [ngForOf]="transactions | slice:sliceStart:sliceEnd" let-isOdd="odd" let-isEven="even">
                    <tr transaction [transaction]="tr" [class.rowOdd]="isOdd" [class.rowEven]="isEven" class="row"></tr>
                </template>
            </table>
        </div>
    </div>
    
    <div class="clear"></div>
</div>